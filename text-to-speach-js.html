<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <title>Document</title>
</head>

<body>
    
    <div class="container py-5">
        <a class="btn btn-warning display-1" href="/">&#128281;</a>
        <div class="row d-flex justify-content-center">
            <div class="col-md-8">
                <h2 class="text-center">Convert your text to speach</h2>
                <textarea class="form-control" cols="50" rows="10" id="enter-text" placeholder="Enter Text"></textarea>
                <div class="d-flex justify-content-center gap-3 text-center mt-3">
                    <button class="btn btn-primary text-uppercase" id="speak">Start</button>
                    <button class="btn btn-primary text-uppercase" id="stop" disabled>Stop</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            const speakBtn = $('#speak');
            const stopBtn = $('#stop');
            const enterText = $('#enter-text');
            const message = new SpeechSynthesisUtterance();
            let voices = [];
    
            // Load voices once available
            function loadVoices() {
                voices = window.speechSynthesis.getVoices();
                message.voice = voices.find(voice => voice.name.toLowerCase().includes('female')) || 
                            voices.find(voice => voice.lang === 'en-US') || 
                            voices[0]; // Fallback to first voice
            }
    
            // Check for voices when the page loads
            loadVoices();
    
            // Check for voices when they change (e.g., user changes settings)
            $(window).on('voiceschanged', loadVoices);
    
            speakBtn.on('click', function() {
                const text = enterText.val().trim();
                if (text) {
                    message.text = text;
                    window.speechSynthesis.speak(message);
    
                    // Disable the speak button and enable the stop button while speaking
                    speakBtn.prop('disabled', true);
                    stopBtn.prop('disabled', false);
                } else {
                    alert('Please enter some text to speak.');
                }
            });
    
            // When the speech finishes, change button states
            message.onend = function() {
                speakBtn.prop('disabled', false);
                stopBtn.prop('disabled', true);
            };
    
            // Disable the stop button when not speaking
            message.onpause = function() {
                stopBtn.prop('disabled', true);
            };
    
            // Re-enable the speak button and disable the stop button when stopped manually
            stopBtn.on('click', function() {
                window.speechSynthesis.cancel();
                speakBtn.prop('disabled', false);
                stopBtn.prop('disabled', true);
            });
        });
    </script>
    
</body>

</html>